#!/bin/sh

# Mount standard Linux file systems, not required to be in /etc/fstab
mount -t proc  proc /proc
mount -t sysfs sys  /sys

mkdir /dev/pts
mount -t devpts devpts /dev/pts

mkdir /dev/shm
mount -t shm shm /dev/shm

# Set up device nodes, scan /sys to populate /dev
mdev -s

# Mount rest of file systems, listed in /etc/fstab
mount -a
mount -o remount,rw /

# create some dirs to avoid warning messages
mkdir -p /var/run
mkdir -p /var/log
mkdir -p /var/lib
mkdir -p /etc/network/if-up.d
mkdir -p /etc/network/if-pre-up.d

# Logs to /var/log/messages
hostname -F /etc/hostname
syslogd

# make home directory for root user
mkdir -p /root

# telnetd requires this
mkdir -p /dev/pts && \
 mount -t devpts none /dev/pts &

# Start kernel logger now that syslogd likely is up
klogd

# Create basic httpd.conf
#cat <<EOF >/etc/httpd.conf
#H:/http
#I:index.html
#/cgi-bin:root:$passwd
#EOF

# Bring up all /etc/network/interfaces
ifup -a 2>&1 >/dev/null

